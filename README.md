# AI Band Plugin

A C++ JUCE audio plugin that integrates with the [ai-band-backend](https://github.com/sergiecode/ai-band-backend) to provide AI-generated bass and drum accompaniment in your DAW.

## 🎯 Project Purpose

The AI Band Plugin serves as a bridge between the AI Band Backend's intelligent MIDI generation capabilities and your Digital Audio Workstation (DAW). It loads and plays AI-generated bass and drum tracks, providing real-time musical accompaniment based on chord progressions.

This plugin is designed to be the foundation for integration with the future **ai-band-orchestrator** server, which will enable real-time communication and advanced features.

## 🎵 How It Works

### Current Functionality
1. **MIDI File Loading**: The plugin can load MIDI files generated by the ai-band-backend
2. **Real-time Playback**: Bass and drum tracks are played in sync with your DAW's transport
3. **File Monitoring**: Automatically detects new MIDI files in a specified folder
4. **DAW Integration**: Works as a VST3/AU plugin in major DAWs

### AI Band Backend Integration
- **Input**: The ai-band-backend analyzes chord progressions
- **Processing**: AI generates professional bass lines and drum patterns
- **Output**: Standard MIDI files compatible with this plugin
- **Format**: Separate bass and drum tracks with proper timing and musical structure

### Future Orchestrator Integration
The plugin includes placeholder code for future integration with **ai-band-orchestrator**:
- Real-time chord progression sending
- WebSocket communication for live generation
- Network-based file management
- Advanced synchronization features

## 🚀 Getting Started

### Prerequisites

1. **JUCE Framework** (version 7.0 or later)
   - Download from [JUCE.com](https://juce.com/get-juce)
   - Install and set up your development environment

2. **Build Tools**
   - **Windows**: Visual Studio 2019/2022 with C++ development tools
   - **macOS**: Xcode 12+ with command line tools
   - **Linux**: GCC/Clang with development packages

3. **AI Band Backend**
   - Clone and set up [ai-band-backend](https://github.com/sergiecode/ai-band-backend)
   - Generate test MIDI files for the plugin

### Installation and Setup

#### Option 1: Using CMake (Recommended)

```bash
# Clone the repository
git clone https://github.com/your-username/ai-band-plugin.git
cd ai-band-plugin

# Create build directory
mkdir build
cd build

# Configure with CMake
cmake .. -DCMAKE_BUILD_TYPE=Release

# Build the plugin
cmake --build . --config Release

# Install to system plugin directories (optional)
cmake --install .
```

#### Option 2: Using Projucer

1. Install JUCE and open Projucer
2. Create a new Audio Plugin project
3. Copy the source files from this repository to your project
4. Configure the plugin settings:
   - Plugin Name: AI Band Plugin
   - Plugin Code: AiBP
   - Manufacturer Code: AiBd
   - Plugin Formats: VST3, AU, Standalone
5. Generate project files for your platform
6. Build using your IDE

### Configuration

1. **MIDI Folder Setup**:
   - Create a folder for generated MIDI files (e.g., `C:\AIBand\Output\`)
   - Configure the ai-band-backend to output files to this folder
   - In the plugin, select this folder using "Select MIDI Folder..."

2. **DAW Installation**:
   - Copy the built plugin to your DAW's plugin directory:
     - **Windows VST3**: `C:\Program Files\Common Files\VST3\`
     - **macOS AU**: `~/Library/Audio/Plug-Ins/Components/`
     - **macOS VST3**: `~/Library/Audio/Plug-Ins/VST3/`
   - Rescan plugins in your DAW

## 🎛️ Usage Guide

### Basic Workflow

1. **Load the Plugin**:
   - Add AI Band Plugin to a MIDI track in your DAW
   - The plugin will appear with transport controls and file browser

2. **Load MIDI Files**:
   - **Method 1**: Use the file browser to select bass and drum MIDI files
   - **Method 2**: Set up folder monitoring for automatic loading
   - **Method 3**: Double-click MIDI files in the browser

3. **Playback Control**:
   - Click **Play** to start the AI-generated accompaniment
   - Use **Stop** to halt playback
   - The plugin syncs with your DAW's transport automatically

4. **Monitor Activity**:
   - Visual indicators show when bass (green) and drums (red) are active
   - Position display shows current playback location
   - Status messages indicate file loading and playback state

### File Organization

Organize your MIDI files with clear naming for automatic detection:
```
MIDI_Output/
├── bass_cmajor_120bpm.mid      # Bass track
├── drum_cmajor_120bpm.mid      # Drum track
├── bass_progression_001.mid    # Alternative naming
└── drum_progression_001.mid
```

The plugin recognizes files containing "bass" or "drum" in the filename.

### Testing with AI Band Backend

1. **Generate Test Files**:
   ```bash
   cd ai-band-backend
   python src/main.py
   ```

2. **Expected Output**:
   ```
   output/
   ├── bass_track.mid     # AI-generated bass line
   └── drum_track.mid     # AI-generated drum pattern
   ```

3. **Load in Plugin**:
   - Point the plugin to the `output/` folder
   - Files should load automatically
   - Press Play to hear the AI-generated accompaniment

## 🔧 Development

### Project Structure

```
ai-band-plugin/
├── Source/
│   ├── PluginProcessor.cpp     # Core audio processing
│   ├── PluginProcessor.h       # Processor interface
│   ├── PluginEditor.cpp        # User interface
│   ├── PluginEditor.h          # UI components
│   ├── MidiManager.cpp         # MIDI file handling
│   ├── MidiManager.h           # MIDI utilities
│   ├── NetworkClient.cpp       # Network communication (future)
│   └── NetworkClient.h         # Orchestrator integration
├── Builds/                     # Platform-specific builds
├── CMakeLists.txt             # Build configuration
└── README.md                  # This file
```

### Key Classes

- **`AIBandAudioProcessor`**: Main plugin processor handling audio and MIDI
- **`AIBandAudioProcessorEditor`**: User interface with controls and file browser
- **`MidiManager`**: Utilities for loading and managing MIDI files
- **`NetworkClient`**: Placeholder for future orchestrator communication

### Building from Source

1. **Install Dependencies**:
   ```bash
   # Install JUCE (follow platform-specific instructions)
   # Install CMake 3.22+
   ```

2. **Configure Build**:
   ```bash
   mkdir build && cd build
   cmake .. -DCMAKE_BUILD_TYPE=Debug
   ```

3. **Compile**:
   ```bash
   cmake --build .
   ```

### Adding Features

The codebase is designed for easy extension:

1. **MIDI Processing**: Extend `MidiManager` for new file formats
2. **UI Components**: Add controls in `PluginEditor`
3. **Network Features**: Implement methods in `NetworkClient`
4. **Audio Effects**: Add processing in `PluginProcessor::processBlock`

## 🌐 Future Orchestrator Integration

### Planned Features

The plugin includes placeholder code for **ai-band-orchestrator** integration:

1. **Real-time Communication**:
   ```cpp
   // Send chord progression for live generation
   networkClient.requestGeneration(chords, tempo, key, callback);
   
   // Receive generated MIDI in real-time
   networkClient.enableRealtimeMode(true);
   ```

2. **WebSocket Integration**:
   - Live chord progression streaming
   - Real-time MIDI generation
   - Bidirectional communication

3. **REST API Integration**:
   - File management
   - Generation requests
   - Status monitoring

### Implementation Notes

- Network code is currently placeholder (methods return false)
- Enable features by implementing methods in `NetworkClient`
- Server communication follows ai-band-backend integration patterns
- WebSocket support prepared for real-time features

### Connection Configuration

```cpp
// Future orchestrator connection
networkClient.connectToServer("localhost", 8080);
networkClient.setConnectionCallback([](bool connected, const String& status) {
    DBG("Connection status: " << status);
});
```

## 🧪 Testing

### Manual Testing

1. **Plugin Loading**:
   - Load in multiple DAWs (Ableton Live, Logic Pro, Reaper, etc.)
   - Verify all controls are functional
   - Test plugin formats (VST3, AU, Standalone)

2. **MIDI Playback**:
   - Load bass and drum MIDI files
   - Verify synchronization with DAW transport
   - Test start/stop functionality

3. **File Management**:
   - Test folder monitoring
   - Verify automatic file detection
   - Check file browser functionality

### Automated Testing

Future testing framework will include:
- Unit tests for MIDI processing
- Integration tests with ai-band-backend
- Performance benchmarks
- Cross-platform compatibility tests

## 🔍 Troubleshooting

### Common Issues

1. **Plugin Not Loading**:
   - Check plugin is in correct DAW directory
   - Verify plugin format compatibility (VST3/AU)
   - Rescan plugins in DAW preferences

2. **No MIDI Output**:
   - Ensure MIDI track is selected in DAW
   - Check plugin is receiving MIDI input
   - Verify MIDI files are properly formatted

3. **File Loading Errors**:
   - Check MIDI file format (Standard MIDI File)
   - Verify file permissions and accessibility
   - Ensure files are not corrupted

4. **Build Issues**:
   - Verify JUCE installation and paths
   - Check CMake version (3.22+ required)
   - Ensure development tools are installed

### Performance Optimization

- Use Release build for production
- Monitor CPU usage during playback
- Optimize MIDI buffer sizes for low latency
- Enable multi-threading for file operations

## 📚 API Reference

### Core Plugin Methods

```cpp
// Audio Processor
bool loadMidiFiles(const String& bassFile, const String& drumFile);
void startPlayback();
void stopPlayback();
bool isPlaying() const;
void setMidiFolder(const String& folder);

// MIDI Manager
bool loadMidiFile(const String& filePath, MidiBuffer& buffer);
double getMidiDurationInBeats(const MidiBuffer& buffer) const;
double getTempoFromMidi(const MidiBuffer& buffer) const;

// Network Client (Future)
bool connectToServer(const String& address, int port);
bool requestGeneration(const Array<var>& chords, int tempo, const String& key);
void enableRealtimeMode(bool enable);
```

## 🤝 Contributing

### Development Setup

1. Fork the repository
2. Create a feature branch
3. Follow JUCE coding standards
4. Add tests for new functionality
5. Update documentation
6. Submit a pull request

### Code Style

- Follow JUCE naming conventions
- Use RAII for resource management
- Document public APIs with Doxygen comments
- Maintain real-time safety in audio thread

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 🎵 Related Projects

- **[ai-band-backend](https://github.com/sergiecode/ai-band-backend)**: Core AI generation engine
- **ai-band-orchestrator** (coming soon): Server coordination layer
- **AI Band Ecosystem**: Complete solution for AI-powered musical accompaniment

## 📞 Support

- **Issues**: Report bugs via GitHub Issues
- **Discussions**: Use GitHub Discussions for questions
- **Documentation**: See integration guides in ai-band-backend
- **Community**: Join the AI Band community for support

---

**Created by Sergie Code - AI Tools for Musicians**  
**Integrates with ai-band-backend for intelligent musical accompaniment**  
**Ready for ai-band-orchestrator integration**
